# ====================================
# Manufacturing Execution System Environment Configuration
# ====================================
# Copy this file to .env and update with your values

# Environment
NODE_ENV=development
APP_NAME="Manufacturing Execution System"

# ====================================
# Database Configuration (PostgreSQL)
# ====================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=manufacturing_execution_system_db

# Database URL for TypeORM
DATABASE_URL=postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# ====================================
# Redis Configuration
# ====================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}

# Redis Database Indexes
REDIS_CACHE_DB=0
REDIS_SESSION_DB=1
REDIS_QUEUE_DB=2

# ====================================
# Keycloak Configuration
# ====================================
KEYCLOAK_HOST=localhost
KEYCLOAK_PORT=8080
KEYCLOAK_HTTPS_PORT=8443
KEYCLOAK_URL=http://${KEYCLOAK_HOST}:${KEYCLOAK_PORT}
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak Realm Configuration
KEYCLOAK_REALM=mes
KEYCLOAK_CLIENT_ID=backend
KEYCLOAK_CLIENT_SECRET=backend-secret
KEYCLOAK_ADMIN_CLIENT_ID=admin-portal
KEYCLOAK_ADMIN_CLIENT_SECRET=
KEYCLOAK_USER_CLIENT_ID=user-portal
KEYCLOAK_USER_CLIENT_SECRET=
# Additional URLs for client configuration
BACKEND_URL=http://localhost:3000
BACKEND_CLIENT_SECRET=backend-secret
ADMIN_PORTAL_URL=http://localhost:3001
USER_PORTAL_URL=http://localhost:3002

# ====================================
# OpenFGA Authorization Configuration
# ====================================
OPENFGA_HOST=localhost
OPENFGA_HTTP_PORT=8081
OPENFGA_GRPC_PORT=8082
OPENFGA_METRICS_PORT=3001
OPENFGA_API_URL=http://${OPENFGA_HOST}:${OPENFGA_HTTP_PORT}
OPENFGA_STORE_ID=01K4NEQQT8SE7SX8ZW2ZK8EY2C
OPENFGA_PRESHARED_KEY=secret
OPENFGA_PLAYGROUND_ENABLED=true
OPENFGA_LOG_LEVEL=info

# ====================================
# Backend API Configuration
# ====================================
BACKEND_HOST=localhost
BACKEND_PORT=3000
BACKEND_DEBUG_PORT=9229
API_PREFIX=api
API_VERSION=v1

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# CORS Configuration
CORS_ORIGINS=http://localhost:3001,http://localhost:3002
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ====================================
# Frontend Configuration
# ====================================
# Admin Portal
ADMIN_PORTAL_PORT=3001
NEXT_PUBLIC_ADMIN_API_URL=http://localhost:3000
NEXT_PUBLIC_ADMIN_KEYCLOAK_URL=http://localhost:8080
NEXT_PUBLIC_ADMIN_KEYCLOAK_REALM=mes
NEXT_PUBLIC_ADMIN_KEYCLOAK_CLIENT_ID=mes-admin-portal

# User Portal
USER_PORTAL_PORT=3002
NEXT_PUBLIC_USER_API_URL=http://localhost:3000
NEXT_PUBLIC_USER_KEYCLOAK_URL=http://localhost:8080
NEXT_PUBLIC_USER_KEYCLOAK_REALM=mes
NEXT_PUBLIC_USER_KEYCLOAK_CLIENT_ID=mes-user-portal

# ====================================
# Email Configuration
# ====================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM_NAME="MES System"
SMTP_FROM_EMAIL=noreply@mes.local

# ====================================
# File Upload Configuration
# ====================================
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_MAX_FILES=10
UPLOAD_DESTINATION=./uploads
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,doc,docx,xls,xlsx

# ====================================
# Logging Configuration
# ====================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_DIR=./logs
LOG_MAX_FILES=14d
LOG_MAX_SIZE=20m

# ====================================
# Queue Configuration (Bull)
# ====================================
QUEUE_DEFAULT_REMOVE_ON_COMPLETE=100
QUEUE_DEFAULT_REMOVE_ON_FAIL=500
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5000

# ====================================
# WebSocket Configuration
# ====================================
WS_PORT=3000
WS_CORS_ORIGINS=http://localhost:3001,http://localhost:3002

# ====================================
# Monitoring & Metrics
# ====================================
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000

# ====================================
# Development Tools (Dev Only)
# ====================================
# pgAdmin
PGADMIN_PORT=5050
PGADMIN_EMAIL=admin@mes.local
PGADMIN_PASSWORD=admin

# Redis Commander
REDIS_COMMANDER_PORT=8083
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin

# ====================================
# Production Configuration
# ====================================
# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# Security
BCRYPT_ROUNDS=10
SESSION_SECRET=your-session-secret-change-this-in-production
COOKIE_SECURE=false
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=strict

# ====================================
# Multi-Tenant Configuration
# ====================================
MULTI_TENANT_ENABLED=true
DEFAULT_TENANT_ID=default
TENANT_HEADER_NAME=X-Tenant-ID

# ====================================
# System Configuration
# ====================================
# Timezone
TZ=UTC

# Locale
DEFAULT_LOCALE=en-US

# Currency
DEFAULT_CURRENCY=USD

# Date Format
DATE_FORMAT=YYYY-MM-DD
DATETIME_FORMAT=YYYY-MM-DD HH:mm:ss

# ====================================
# Feature Flags
# ====================================
FEATURE_ENABLE_REGISTRATION=true
FEATURE_ENABLE_2FA=false
FEATURE_ENABLE_OAUTH=true
FEATURE_ENABLE_AUDIT_LOG=true
FEATURE_ENABLE_API_DOCS=true
FEATURE_ENABLE_WEBSOCKET=true
FEATURE_ENABLE_QUEUE_DASHBOARD=false

# ====================================
# External Services (Future Integration)
# ====================================
# ERP Integration
ERP_ENABLED=false
ERP_API_URL=
ERP_API_KEY=

# Notification Service
NOTIFICATION_SERVICE_URL=
NOTIFICATION_SERVICE_API_KEY=

# ====================================
# Backup Configuration
# ====================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups

# ====================================
# Nginx Configuration (Optional)
# ====================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_SERVER_NAME=localhost

# ====================================
# Docker Configuration
# ====================================
COMPOSE_PROJECT_NAME=mes
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1